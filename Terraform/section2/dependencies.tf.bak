resource "aws_s3_bucket" "example" {
  bucket = "kplabs-demo-s3-007"
}

resource "aws_instance" "example1" {
  ami           = "ami-0c462b53550d4fca8"
  instance_type = "t3.micro"

  # Youâ€™re directly telling Terraform: this instance must be created after the S3 bucket.
  depends_on = [aws_s3_bucket.example] # <-- explicit
}


resource "aws_security_group" "prod" {
  name = "production-sg"
}

resource "aws_instance" "example2" {
  ami           = "ami-0c462b53550d4fca8"
  instance_type = "t3.micro"

  # Because example2 references the attribute aws_security_group.prod.id, 
  # Terraform automatically knows it must create the security group first.
  vpc_security_group_ids = [aws_security_group.prod.id] # <-- implicit
}
